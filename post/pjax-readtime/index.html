<!DOCTYPE html>
<html lang="zh-CN"><head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta property="og:title" content="开启PJAX后的坑" />
    <title>开启PJAX后的坑 | Cold World</title>
    <link rel="stylesheet" href="/css/style.css" /> 
    <link rel="stylesheet" href="/css/fonts.css" /> 
    <link rel="stylesheet" href="/css/syntax.css" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />
</head>
<body><body>
  <h1 class="site-title">Cold World</h1>
  <nav>
    <ul class="menu">
      
      <li><a class="no-tag" href="/">Posts</a></li>
      
      <li><a class="no-tag" href="/tags/">Tags</a></li>
      
      <li><a class="no-tag" href="/categories/">Categories</a></li>
      
      <li><a class="no-tag" href="/about/">About</a></li>
      
      <li><a class="no-tag" href="/index.xml">RSS</a></li>
      
    </ul>
    <hr />
  </nav>
</body>
<div id="content">
<div>
  <h1><span class="title">开启PJAX后的坑</span></h1>
  <h4 class="date">
    <span class="initpost">Published at:</span> 2023/03/11
    &nbsp;&nbsp;&nbsp;
    <span class="lastmod">Last updated:</span> 2023/03/11
  </h4>
</div>

<main>
  <blockquote>
<p>刚开启的<code>PJAX</code>就出问题了，有些<code>JS</code>虽然加了 <code>data-pjax</code> 属性，依然没有重载，出现在用户自己编写的用于计算阅读时间的<code>js</code>函数中。</p>
</blockquote>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="ln">1</span><span class="cl"><span class="c1">// 原函数写法
</span></span></span><span class="line"><span class="ln">2</span><span class="cl"><span class="c1"></span><span class="nx">aaaaaaaaaaaaaaa</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">3</span><span class="cl"><span class="c1">// 现在的写法
</span></span></span><span class="line"><span class="ln">4</span><span class="cl"><span class="c1"></span><span class="kd">function</span> <span class="nx">pjax_reload</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln">5</span><span class="cl">    <span class="nx">aaaaaaaaaaaaaaa</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">6</span><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="ln">7</span><span class="cl"><span class="nb">document</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s2">&#34;pjax:complete&#34;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln">8</span><span class="cl">  <span class="nx">pjax_reload</span><span class="p">();</span> <span class="c1">// Pjax 完成后，重新加载上面的函数
</span></span></span><span class="line"><span class="ln">9</span><span class="cl"><span class="c1"></span><span class="p">});</span>
</span></span></code></pre></div>
</main>

<div class="discussion">
  <script src="https://giscus.app/client.js"
        data-repo="Han1enG/Han1enG.github.io"
        data-repo-id="R_kgDOLRozFg"
        data-category="Announcements"
        data-category-id="DIC_kwDOLRozFs4CdL5k"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="preferred_color_scheme"
        data-lang="zh-CN"
        crossorigin="anonymous"
        async>
</script>
</div>
</div><footer>
  <hr />
  <small>
    <span>
      Copyright 2022-2024 <a href="https://beian.miit.gov.cn/" target="_blank">冀ICP备2023006518号</a>
    </span>
    <span>
      All articles on this site are licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">CC BY-NC 4.0</a >
    </span>
  </small>
</footer>
</body>
</html>
